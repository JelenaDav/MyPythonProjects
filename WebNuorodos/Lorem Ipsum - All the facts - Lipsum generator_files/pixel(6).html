
<!-- saved from url=(2266)https://googleads.g.doubleclick.net/xbbe/pixel?d=CJfnugEQpvPq4AIYgaOi6QEwAQ&v=APEucNXSeEJo1JDrPoj6DD530uujI0l93nqau7ODRNqcdZ_mmb4QejVmaOTNNJfPAN-wr872h3mwqCXB7R7bM4ah43nARFJcQ7EijoM06dT07pZtITg8B22w9E5G1r7nQAq0cHljmadKE2qqrrMWQPQCk0kB0Uu1XDgVusDZm4EctNnpQmX659ejCQ8XdXBbFV-YzXBaWMylbg1zP1Arq3UqAvyBd4ppfiPjerYOpFkriKJe9W6iCyfibD6J4Y4GbIY-J2eoqMUlscCrnk-KvwenJ8V3IXnHq3lvJeBCF8y8IEP4WRgZufJMr4RO1pW3y5PfAFYDE-jBNhMn-1cyYosDjO3FNWb3SuGKygrv_8iCVKPkuKnAg2QN_gAoRS84-RR6ncEXy2SoGOxpQQ5WOlR03Y3dcRStgBWGHzVxPNdnUuN0Aiykj6flRplkOZAZi7CVokTiHFfk8Jjcc-gar4LPFL9VM1wsX7DtaSYzJUqsyIbga0JIGZvpulPnY9AmMFamuROrJtllnMSBOonq7oOyd8r4Hjgq9-0OQ-x283YS8p_3Muk4m_MpSjrTsnpXNpJccyHR0Q4qqBO4AGcvTxeThTqnkP_vc_TCfgTE2LPOPdxZHHeyQnY1WWRtwagYqvIaRSChUF9hcbAGEExXXOHrp-0LXsGpHPTOqmVG_hgiF69Bx5zUC8D-Eja2XeT98Ps4jVuPXvXkAGiuQIfoUHkE0onbe1oHDDWrz6g_ZsjVcNcZ5Es-QtR50fcjdUO0lHEqXS4VSfK4AhBlV9lcAUYFJJKHk2RTr22-1okTHm8yIvsE-NMpt-qVD4L9Nwav1KS5lub24uN6jSeJsicRNiZIdyQ71KX-c0188mA16Gp0h0VE_96jeOnDlSlW8sLhgNDEZ8oLewGlT2nb569HWMeF4JR2X9jVzSLGwN31sQ_j2e3olUWpKyGE4AOb9fFDcuJwa1yP7QJ0qh7hajt-5Xy4D2awpIG2syJFkBkQSbLbnWkZpBt27Z_OSWwsdVUwKnzKhEkcnxu-5KyqN37FwXrNPNPbaXW23S-qLLWzkG0mbrH18zpvZIeSO35Xq4vXOCgKWp_KSNQ22lPpiDyZwLlD-DukISLFjH92bpi8qi92poyWXHPLLcd5-PEBeGMVzcjzMTsQguy71thS6-RIC00EovWDySGcwm-ZAujmqHKfOsu_HSp3wa1iO_p_2NRFaJd2-vJ4mal-0vQeD7uAbJhJcupZ8NQHr4U4pbm82PGCq7IX4y4dBFQ4w25-xiSiQdqLzN5DWoVhSYYk6e7J6a6kVvxvS5f3bdA3TYbF-i1tW7MDliCAdh6e986cJwEcF4HOLyB9h1xZqzsZGMD8csJy_Mx7VWsDUfS-WcioGph3lp9Cn_6PheuVHSpgqChkQUS2mdERh8kX_Zn87vD5rT-RDB-z442RhJAC71ESKH47S8viAmQpb1xZkFKssZ8Kl7itOq0G8YEJo9vEaJan6tGEvKAt7XlFhHk4ndoVW2sriJNkliKRnBXzorp7FTzy2xAx6EWYjapBuH6O6QXAH_YpOtMd-JNI9Ii8u9DedZrRW0xVdcGw0ylWPFP8paJZOZbdmMy4y6UEsMtE3b9Y3rqJC3UOwkQRFWklrNZPHBMceU_5WYAZt-vzXrzGjicjfJxcQyDOgCMZyMW0jJvSHyxYQCr_kTcbwtBqZMQoqXeO-qLClqzMkzuFMjCWsy1kTeyY2DvQzeTy_PuIzn_3Apyxozq1C1mGCTWKvqr4QbZANcV2fGrW0FiFcgPAur06udB3_M_nrwQm_6G307782fnvB3irCxcDmNzltdptgRzbXxCQNDAt7XZX1JcA7eq7u8_CB5l7Uk3bG3aOTwnm9lVIcxxS77xUhwU2x7K74hn9r4xQzpOZMYF8zgu8SfHwzRjM1FMXNzC6_Td8sskWDruboqpVlONeOhu7RvrfaM3jtUv2YXwDGh0OJ-N0Hjen_Iaru-5kBr8NZAmS3QcJNLE3umIXbS93RPAWVVyKCb0ozeXTICwCtAkn32PAJWx7k3fP2iskEihLHPLeTkjpzy2YIzzlr4hgZTWnK48e-KRVQ31LMPp7LFKzKMPcuRpWt2iGCxFpO8xZ3igYdz8Bzuw7oMkis_G6SAFV77cKPsBeal4AcZIp59qeQwZkcHEMxkXCl9trs8fo -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" data-name="TokenSigning">(function() {
    // Promises
    var _eid_promises = {};
    // Turn the incoming message from extension
    // into pending Promise resolving
    window.addEventListener("message", function(event) {
        if (event.source !== window) return;
        if (event.data.src && (event.data.src === "background.js")) {
            console.log("Page received: ");
            console.log(event.data);
            // Get the promise
            if (event.data.nonce) {
                var p = _eid_promises[event.data.nonce];
                // resolve
                if (event.data.result === "ok") {
                    if (event.data.signature !== undefined) {
                        p.resolve({hex: event.data.signature});
                    } else if (event.data.version !== undefined) {
                        p.resolve(event.data.extension + "/" + event.data.version);
                    } else if (event.data.cert !== undefined) {
                        p.resolve({hex: event.data.cert});
                    } else {
                        console.log("No idea how to handle message");
                        console.log(event.data);
                    }
                } else {
                    // reject
                    p.reject(new Error(event.data.result));
                }
                delete _eid_promises[event.data.nonce];
            } else {
                console.log("No nonce in event msg");
            }
        }
    }, false);

    window.TokenSigning = function() {
        function nonce() {
            var val = "";
            var hex = "abcdefghijklmnopqrstuvwxyz0123456789";
            for (var i = 0; i < 16; i++) val += hex.charAt(Math.floor(Math.random() * hex.length));
            return val;
        }

        function messagePromise(msg) {
            return new Promise(function(resolve, reject) {
                // amend with necessary metadata
                msg["nonce"] = nonce();
                msg["src"] = "page.js";
                // send message
                window.postMessage(msg, "*");
                // and store promise callbacks
                _eid_promises[msg.nonce] = {
                    resolve: resolve,
                    reject: reject
                };
            });
        }
        this.getCertificate = function(options) {
            var msg = {type: "CERT", lang: options.lang, filter: options.filter};
            console.log("getCertificate()");
            return messagePromise(msg);
        };
        this.sign = function(cert, hash, options) {
            var msg = {type: "SIGN", cert: cert.hex, hash: hash.hex, hashtype: hash.type, lang: options.lang, info: options.info};
            console.log("sign()");
            return messagePromise(msg);
        };
        this.getVersion = function() {
            console.log("getVersion()");
            return messagePromise({
                type: "VERSION"
            });
        };
    };
})();</script></head><body><img src="./dv(2)" style="display:none;"><img src="./pixel(3)" style="display:none;"><img src="./exptsync(2)" style="display:none;"></body></html>